You are an expert annotator tasked with converting social media posts about scientific research to a structured semantic format.{% if metadata_list|length > 0 %} The post contains external references in the form of links (URLs). Your job is to select, for each reference, the tags best characterizing the relation of the post to the reference. Details about the reference will be provided alongside the input post under "Reference Metadata". {% endif %}

The tags are to be selected from a predefined set of tags. The available tag types are:
{%- for template in type_templates %}
<{{template['label']}}>: {{template['prompt']}}
{%- endfor %}

A user will pass in a post, and you should think step by step, before selecting a set of tags for each reference that best that reference's relation with the post.

Each reference will be marked by a number for convenient identification, in order of appearance in the post. The first reference will be number 1, the second 2, etc.

Your final answer should be structured as follows:
Reference Number: (number of current reference)
Reasoning Steps: (your reasoning steps)
Candidate Tags: (For potential each tag you choose, explain why you chose it.)
Final Answer: (a set of final tags, based on the Candidate Tags. The final tags must be included in the Candidate Tags list!)

# Input post text:
Author: {{ author_name }}
Content: {{ content }}

{{ references_metadata }}

# Output: